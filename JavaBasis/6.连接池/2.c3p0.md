##  C3p0è¿æ¥æ± 

### è¿æ¥æ–¹å¼

- æ–¹å¼ä¸€ï¼šç¹çï¼Œéœ€è¦æ‰‹åŠ¨è®¾ç½®å‚æ•°ï¼ˆä¸æ¨èï¼Œåªéœ€äº†è§£åŸç†ï¼‰

  ```java
    public void testC3p0_01() throws Exception {
          //1.åˆ›å»ºæ•°æ®æºå¯¹è±¡
          ComboPooledDataSource comboPooledDataSource = new ComboPooledDataSource();
          //2.é€šè¿‡é…ç½®æ–‡ä»¶mysql.properties
          Properties properties = new Properties();
          properties.load(new FileInputStream("src\\mysql.properties"));
          String user= properties.getProperty("user");
          String password= properties.getProperty("password");
          String url= properties.getProperty("url");
          String driver= properties.getProperty("driver");
          //3.ç»™æ•°æ®æºcomboPooledDataSourceè®¾ç½®ç›¸å…³ä¿¡æ¯(ç”¨äºç®¡ç†è¿æ¥)
          comboPooledDataSource.setDriverClass(driver);
          comboPooledDataSource.setJdbcUrl(url);
          comboPooledDataSource.setUser(user);
          comboPooledDataSource.setPassword(password);
          //4.è®¾ç½®åˆå§‹åŒ–è¿æ¥æ•°
          comboPooledDataSource.setInitialPoolSize(10);//äº§ç”Ÿ10ä¸ªè¿æ¥æ”¾å…¥æ± ä¸­
          comboPooledDataSource.setMaxPoolSize(30);//æœ€å¤§è¿æ¥æ•°
          //5.å¼€å§‹è¿æ¥
          long l = System.currentTimeMillis();
          for (int i = 0; i < 5000; i++) {
              Connection connection = comboPooledDataSource.getConnection();
  //            System.out.println("è¿æ¥æˆåŠŸ");
              connection.close();
          }
          long l1 = System.currentTimeMillis();
          System.out.println("C3p0è¿æ¥5000æ¬¡è€—æ—¶ï¼š"+(l1-l));
  
      }
  ```

- æ–¹å¼äºŒï¼šğŸš©ç®€æ´ï¼Œéœ€è¦å¼•å…¥c3p0.config.xmlé…ç½®æ–‡ä»¶ï¼ˆè¿˜éœ€è¦å°†c3p0çš„jaråŒ…å¯¼å…¥é¡¹ç›®ï¼‰

  ```java
  public void testC3p0_02() throws Exception {
      //ç›¸å½“äºå°†æ–¹æ³•1çš„é…ç½®æ­¥éª¤ç”±src/c3p0.config.xmlæ–‡ä»¶å®Œæˆ
      ComboPooledDataSource hello = new ComboPooledDataSource("hello");
      Connection connection = hello.getConnection();
      System.out.println("è¿æ¥æˆåŠŸ");
      connection.close();
  }
  ```

