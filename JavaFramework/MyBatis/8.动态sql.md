##  åŠ¨æ€SQL

###  ifæ ‡ç­¾

æè¿°ï¼štestå±æ€§å¯¹åº”è¡¨è¾¾å¼åˆ¤æ–­ä¸ºçœŸæ—¶æ‹¼æ¥sql

```xml
select id,ename as empName,age from employee where
<if test="empName !=null and empName!='' ">
         ename=#{empName}
</if>
```

###  whereæ ‡ç­¾

æè¿°ï¼šå½“ifæ¡ä»¶æ»¡è¶³ï¼Œå³whereæ ‡ç­¾æœ‰å†…å®¹ï¼Œä¼šè‡ªåŠ¨ç”Ÿæˆwhereå…³é”®å­—ï¼›å¹¶ä¸”å°†**æ¡ä»¶å‰å¤šä½™çš„andã€orå…³é”®å­—å»æ‰**

â€‹				å½“ifæ¡ä»¶éƒ½ä¸æ»¡è¶³ï¼Œå³whereæ ‡ç­¾æ²¡æœ‰å†…å®¹ï¼Œä¸ä¼šç”Ÿæˆwhereå…³é”®å­—

æ³¨ï¼š**åœ¨æ¡ä»¶åçš„andã€or**åœ¨è§£ææ—¶where*ä¸ä¼šè‡ªåŠ¨å»é™¤*

```xml
select id,ename as empName,age from employee
        <where>
            <if test="empName !=null and empName!='' ">
                and ename=#{empName}
            </if>
            <if test="age !=null and age != 0">
                and age=${age}
            </if>
        </where>
```

###  trimæ ‡ç­¾ğŸ“Œ

æè¿°ï¼šprefix/suffixå±æ€§ï¼šå°†trimæ ‡ç­¾å†…å®¹å‰/åæ·»åŠ æŒ‡å®šå†…å®¹

â€‹			   prefixOverrides/suffixOverrideså±æ€§ï¼šå°†trimæ ‡ç­¾ä¸­æ¡ä»¶å‰/åå»æ‰å¤šä½™æŒ‡å®šå†…å®¹ï¼Œå¤šä¸ªå†…å®¹ç”¨ `|`éš”å¼€

æ³¨ï¼šå½“trimæ ‡ç­¾æ²¡æœ‰å†…å®¹ä¸ä¼šèµ·ä½œç”¨

```xml
select id,ename as empName,age from employee
        <trim prefix="where" suffixOverrides="and | or">
            <if test="empName !=null and empName!='' ">
                 ename=#{empName} and
            </if>
            <if test="age !=null and age != 0">
                  age=${age} or
            </if>
        </trim>
```

###  chooseã€whenã€otherwiseæ ‡ç­¾

æè¿°ï¼šåªä¼šåŒ¹é…ä¸€ä¸ªæ¡ä»¶ï¼Œæ‰€ä»¥ä¸ä½¿ç”¨andã€or

```xml
select id,ename as empName,age from employee
        <where>
            <choose>
                <when test="empName !=null and empName!='' ">
                    ename=#{empName}
                </when>
                <when test="age !=null and age != 0">
                    age=${age}
                </when>
                <otherwise>
                    did=1;
                </otherwise>
            </choose>
        </where>
    </select>
```



###  æ‰¹é‡æ“ä½œ

###  foreachæ ‡ç­¾ğŸ“Œ

- collectionå±æ€§ï¼šè®¾ç½®éœ€è¦å¾ªç¯çš„æ•°ç»„æˆ–é›†åˆ
- itemå±æ€§ï¼šè¡¨ç¤ºæ•°ç»„æˆ–é›†åˆçš„æ¯ä¸€ä¸ªå…ƒç´ 
- separatorå±æ€§ï¼šå¾ªç¯ä½“ä¹‹é—´çš„åˆ†éš”ç¬¦
- openå±æ€§ï¼šforeachæ ‡ç­¾å¾ªç¯æ‰€æœ‰å†…å®¹å‰å¼€å§‹ç¬¦
- closeå±æ€§ï¼šforeachæ ‡ç­¾å¾ªç¯æ‰€æœ‰å†…å®¹åç»“æŸç¬¦

æ‰¹é‡åˆ é™¤ï¼šseparatorï¼šåˆ†éš”ç¬¦ï¼Œä½¿ç”¨ï¼Œæˆ–è€…or	

```xml
delete from employee where id in
        (
        <foreach collection="ids" item="id" separator=",">
            #{id}
        </foreach>
        )
```

æ‰¹é‡æ·»åŠ 

```xml
insert into employee values
        <foreach collection="employeeList" item="emp" separator=",">
            (null,#{emp.empName},#{emp.age},1)
        </foreach>
```



###  sqlæ ‡ç­¾

æè¿° ï¼šå°†å¸¸ç”¨å­—æ®µæå–ï¼Œä½¿ç”¨includeå¼•ç”¨

```xml
 <sql id="sqlEmp">id,ename as empName,age</sql>

    <select id="sqlTest" resultType="Employee">
    select <include refid="sqlEmp"></include> from employee;
    </select>
```

